# day3  7.8
- 学习了git与git flow的相关知识，学会在本地使用git进行工作  
- 设计了数据库，并初步编写了基于mysql的数据库文件，   
  暂定使用ins_message, instruct, student, tutor, jwc_message, read_jwc_msg进行存储，在之后确定爬取数据的格式后还需要进一步的修改     
- 开始着手写后端，遵循接口与实现分离原则完成了基本结构的搭建，后期还需要按需求添加辅助类    

# day4  7.9
- 根据上午老师的指导讨论并适当更新了微信前端界面，修改了register页面的样式，添加了部分函数  
- 修改数据库的实现，将主键设置为自增，便于操作  
- 继续完善后端，设计了登陆与进行绑定的接口

# day5 7.10
- 修改了后端对应数据库属性的命名，使其更符合规范，将pk都转为自增主键，便于操作    
- 数据库中timestamp类型在后端对应int会出现错误，故暂时修改称为varchar确保运行的正确性  
- 在read_jwc_msg中添加了msg_id完善设计  
- 根据助教的建议，给每个msg添加一个阶段属性，便于分阶段查看通知  
- 完善后端相关辅助类  
- 在小程序前端实现搜索功能  
- 学习小程序订阅号通知的功能
- 在小程序前端添加信息展示页面messageDetailPage

# day6 7.13
- 学习了junit5的使用方法，建立了简单的项目进行测试，尚未添加到课程项目中     
- 根据需求修改了数据库的一些实现，在数据名方面出现了一些bug，修改了命名方式   
- 在后端实现了login与bind的方法  
- 学习了api文档showdoc的使用    
- 讨论具体功能点的实现  

# day7 7.14
- 根据昨天讨论接口得出的plan.md，在showdoc上完成了所描述基本功能api的设计
- 在后端实现了大部分接口的功能，controller基本完成，其他层全部完成  
- 其中在微信小程序登陆时根据code获取u_id的功能还没有实现  
- 优化数据库结构，将ins_msg拆分为ins_msg与read_ins_msg便于后端一些功能的实现

# day8 7.15
- 继续对先前设计的接口进行完善，添加了导师获取指导学生信息与导师查看已发送信息接口  
- 针对test修改了saveOrUpdate的返回值，从void到当前对象  
- 修改了后端将微信号与学号绑定的函数逻辑，现在小程序可以成功的将openid与学号/工号进行绑定  
- 在微信小程序前端对login与register进行了实现，对原有的页面逻辑进行了一些修改优化  
- 实现了tutorHistoryMsg与tutorHistoryDetailMsg页面的完整功能，包括接口的实现与功能完善优化  
- 原先后端代码缺乏对null的判定存在隐患，修改了一部分，剩下的在test后完成  
- 在后端实现了大部分接口的功能，设定的controller完成  

# day9 7.16
- 实现了原先在数据写死的微信小程序的所有api函数，现在微信小程序的功能基本完全实现，能够完整的与后端进行通信交互，小程序端功能完成      
- 对原先微信小程序的路由逻辑进行了一些调整，根据后端数据类型对前端进行了一些改动    
- 对原先的chooseTutor进行了一些改动，以确保与后端通信时不会发生异常    
- 在后端新增加了allMsgController，作为信息整体操控的controller，后端整体功能完成    
- 根据助教的建议在前端添加了学生端的主页，展示当前阶段与来源于导师，教务处的未读信息数量，并在后端添加了对应的接口并实现    
- 在后端增加了一些对null情况的判断，使得程序的稳定性更高  

# day10 7.17 - 7.19
- 在对后端的测试中发现，若将数据库INT类型的变量默认值设置为NULL，在调用特定的JPA接口时会报错，故将sql文件中所有INT的默认值修改为0  
- 更深入的学习了如何使用mockmvc模拟请求对controller层进行测试  
- 完成了AllMessageControllerTest与JwcMsgControllerTest，测试覆盖率到达100%  
- 在测试时遇到了一些问题，对于一个返回成json或string的接口返回值，若其中所含的属性很多，没有很好的办法进行相等的判断  
花费了很长的时间进行资料的查找但最终没有获得一个很好的解决方案  
首先考虑将String转为对象进行比较，但是对与List类的对象没有找到合适的方法，其次将对象转为String又会遇到属性顺序不一致的状况，  
最终选择将参与对比的变量直接按照class中属性的正确顺序表示为String，便于比较，后期如果发现更好的解决方案会进行修改 
- 通过parseJSON的方式解决了上述问题  

# day11 7.20
- 在听取了助教的意见后，实现了在导航栏上标出未读信息的条目数量  
学生需要统计教务处消息与导师消息，故其中在stuChoseTutor, stuMsgFromIns, stuMsgFromJwc中添加了jwcMsgCount和InsMsgCount的data与对应设置函数    
导师只需要教务处消息，故在tutMsgFromJwc, tutSendMsg, tutHistoryMsg中添加了jwcMsgCount与对应的设置函数  
导师的数量统计实现还有可以用路由传参实现（导师只在一个页面更新唯一的data），若后期有需求可进行修改  
- 根据前端的需求，在后端添加了统计导师未阅读教务处信息的接口与实现，更新了api文档  
- 实现了前端所有的搜索功能  
- 为实现阅读信息情况的实时刷新，修改了msgDetail页面的commit函数，  
现在函数在更新完阅读状态后会根据userType与senderType显式的navigateTo上一级页面，通过强制调用onLoad函数实现刷新功能  
- 在后端所有涉及到获取读取信息的函数中添加了排序功能，将未读item排到前面先显示  
- 制定本周计划  

# day12 7.21
- 实现了后端adminController，实现了新制定的管理员的所有api，  
包括获取学生列表与导师信息，获取导师列表，统计所有教务处信息的阅读状况，统计某条教务处信息的具体阅读情况，解绑的功能
- 对小程序前端导师的页面进行了一些style的修改，使页面更加美观  
- 修正了小程序中的一些bug  
- 实现了之前遗漏的一处搜索功能  
- 阅读文档，学习spring secutity的使用方法  

# day13 7.22
- 继续学习spring secutity的相关方法，但是发现使用spring secutity一般需要用户名和密码，但是本项目并不存在这样的概念，
由于微信小程序的特点，我们只需要通过临时产生的code调用接口就可以获得用户的身份信息，并不需要密码，初步判断spring secutity不是很适用，所以我们考虑用jwt的方式来实现secutity  
- 学习了jwt的相关知识，建立了一个临时项目设计并测试并实现了相关方法， 
即首先通过登陆获取token，再通过自定义注解的方式规定每个接口的受用范围，再通过拦截器实现访问控制，接下来将方法运用到实际项目中   

# day14 7.23  
- 建立了一个securityDemo，通过模拟测试确保了jwt的可行  
- 将jwt运用到了实际项目的后端中，通过拦截所有请求，再根据每个接口对应的注解对身份权限通过header中的token进行认证，后端的安全功能基本实现  
- 测试了部分添加security的接口，没有出现问题，剩下的明天测试  
- 建立了管理员的数据库，并实现了管理员注册与登陆的功能，但是管理员的注册还需要再考虑，是否开放注册接口？  
- 在api文档中更新了新加入的接口  

# day15 7.24
- 根据后端security对token的需求，完善了前端与后端进行交互的接口，即存储token与发送token  
- 同时在前端添加了对请求返回值的检查，增加了失败请求时的提示   
- 对前端的页面跳转逻辑进行了少量的修改，减少路由栈的数量  
- token的过期时间设置为30min，即30min过后就会强制重新登陆  
- 暂定security问题由jwt的Interceptor实现，在进行的测试中暂时没有发现问题，之后如果有问题可考虑修改为用filter实现（个人感觉二者差别不大，均为实现为无状态登陆）

# day16 7.27
- 修改了微信小程序在测试时出现的一些bug（app由全局转为class属性未添加this与在回调函数内this指向错误的问题）    
- 在小程序的教务处信息页面上显示更新时间  
- 学习后端性能测试方法并用简单实例测试工具    
- 配置后端测试环境  

# day17 7.28
- 完成了对后端测试环境的配置  
- 使用jmeter对主要功能的接口编写了测试用例  
- 对后端代码进行了一些修改，尽量防止因数据库中数据与预期数据不符合的情况下引发的错误  
- 后端部分函数有可优化的空间，在完整性能测试后若有必要就进行优化（先从非代码角度出发）  

# day18 7.29
- 完善了后端，学习了服务号发送信息的方法，在后端添加了导师发送信息后向学生在微信上发送通知的功能，由于使用的是个人账号，模版受限，只能暂时选用一次发送的模版  
- 向数据库中注入完整测试数据后开始进行本地压力测试，在主要的功能接口中，绝大部分性能没有问题，  
只有获取所有教务处信息与阅读情况（api/user/typejwcmsg/{type}/{userId}）接口性能一般，在进行代码层面的优化后没有明显的提升，初步认定瓶颈是在在数据量很大的数据库中进行大量搜索导致响应速度变慢，之后主要解决这个接口的性能问题

